{"version":3,"file":"reactive.min.js","sources":["../../src/package_search/reactive.js"],"sourcesContent":["/*\n * This file is part of the QuestionPy Moodle plugin - https://questionpy.org\n *\n * Moodle is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * Moodle is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n */\n\n/**\n * @module qtype_questionpy/package_search/reactive\n */\n\nimport {Reactive} from 'core/reactive';\n\nimport SearchMutations from 'qtype_questionpy/package_search/mutations';\nimport {eventNames, notifyStateChanged} from 'qtype_questionpy/package_search/events';\nimport Area from 'qtype_questionpy/package_search/components/area';\n\nlet counter = 0;\n\nexport default class extends Reactive {\n    /**\n     * Reactive element used for package search.\n     *\n     * @param {HTMLDivElement} target\n     * @param {{contextid: number, limit: number}} options\n     */\n    constructor(target, options) {\n        super({\n            name: `PackageSearch${counter++}`,\n            eventName: eventNames.stateChanged,\n            eventDispatch: notifyStateChanged,\n            target: target,\n            mutations: new SearchMutations(options),\n            state: {\n                general: {\n                    loading: true,\n                    sorting: {\n                      sort: \"alpha\",\n                      order: \"asc\",\n                    },\n                    query: \"\",\n                },\n                all: {\n                    count: 0,\n                    total: 0,\n                    page: 0,\n                },\n                allPackages: [],\n                recentlyused: {\n                    count: 0,\n                    total: 0,\n                    page: 0,\n                },\n                recentlyusedPackages: [],\n                favourites: {\n                    count: 0,\n                    total: 0,\n                    page: 0,\n                },\n                favouritesPackages: [],\n                custom: {\n                    count: 0,\n                    total: 0,\n                    page: 0,\n                },\n                customPackages: [],\n            },\n        });\n        this.options = options;\n    }\n\n    /**\n     * Loads every component of the package search area.\n     */\n    load() {\n        new Area({\n            element: this.target,\n            name: \"search_area\",\n            reactive: this\n        });\n    }\n}\n"],"names":["counter","Reactive","constructor","target","options","name","eventName","eventNames","stateChanged","eventDispatch","notifyStateChanged","mutations","SearchMutations","state","general","loading","sorting","sort","order","query","all","count","total","page","allPackages","recentlyused","recentlyusedPackages","favourites","favouritesPackages","custom","customPackages","load","Area","element","this","reactive"],"mappings":"ogBA2BIA,QAAU,yBAEeC,mBAOzBC,YAAYC,OAAQC,eACV,CACFC,4BAAsBL,WACtBM,UAAWC,mBAAWC,aACtBC,cAAeC,2BACfP,OAAQA,OACRQ,UAAW,IAAIC,mBAAgBR,SAC/BS,MAAO,CACHC,QAAS,CACLC,SAAS,EACTC,QAAS,CACPC,KAAM,QACNC,MAAO,OAETC,MAAO,IAEXC,IAAK,CACDC,MAAO,EACPC,MAAO,EACPC,KAAM,GAEVC,YAAa,GACbC,aAAc,CACVJ,MAAO,EACPC,MAAO,EACPC,KAAM,GAEVG,qBAAsB,GACtBC,WAAY,CACRN,MAAO,EACPC,MAAO,EACPC,KAAM,GAEVK,mBAAoB,GACpBC,OAAQ,CACJR,MAAO,EACPC,MAAO,EACPC,KAAM,GAEVO,eAAgB,WAGnB1B,QAAUA,QAMnB2B,WACQC,cAAK,CACLC,QAASC,KAAK/B,OACdE,KAAM,cACN8B,SAAUD"}