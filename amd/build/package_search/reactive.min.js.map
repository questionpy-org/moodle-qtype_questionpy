{"version":3,"file":"reactive.min.js","sources":["../../src/package_search/reactive.js"],"sourcesContent":["/*\n * This file is part of the QuestionPy Moodle plugin - https://questionpy.org\n *\n * Moodle is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * Moodle is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n */\n\n/**\n * @module qtype_questionpy/package_search/reactive\n */\n\nimport {Reactive} from 'core/reactive';\n\nimport SearchMutations from 'qtype_questionpy/package_search/mutations';\nimport {eventNames, notifyStateChanged} from 'qtype_questionpy/package_search/events';\nimport Container from 'qtype_questionpy/package_search/components/container';\nimport SearchBar from 'qtype_questionpy/package_search/components/search_bar';\n\nlet counter = 0;\n\nexport default class extends Reactive {\n\n    /**\n     * Reactive element used for package search.\n     *\n     * @param {HTMLDivElement} target\n     * @param {{contextid: number, limit: number}} options\n     */\n    constructor(target, options) {\n        const noData = {\n            packages: [],\n            count: 0,\n            total: 0,\n        };\n\n        super({\n            name: `PackageSearch${counter++}`,\n            eventName: eventNames.stateChanged,\n            eventDispatch: notifyStateChanged,\n            target: target,\n            mutations: new SearchMutations(options),\n            state: {\n                general: {\n                    loading: true,\n                    selected: \"all\",\n                    sort: \"alpha\",\n                    order: \"asc\",\n                    query: \"\",\n                },\n                    all: {\n                        data: noData,\n                        page: 0,\n                    },\n                    recentlyused: {\n                        data: noData,\n                        page: 0,\n                    },\n                    favourites: {\n                        data: noData,\n                        page: 0,\n                    },\n                    mine: {\n                        data: noData,\n                        page: 0,\n                    },\n                },\n        });\n        this.options = options;\n    }\n\n    /**\n     * Loads every component of the package search area.\n     */\n    load() {\n        this.searchBar = new SearchBar({\n            element: this.target.getElementsByClassName(\"qpy-package-search-search-bar\")[0],\n            name: \"search_bar\",\n            reactive: this\n        });\n        this.packageContainer = new Container({\n            element: this.target.getElementsByClassName(\"qpy-package-search-container\")[0],\n            name: \"container\",\n            reactive: this\n        });\n    }\n}\n"],"names":["counter","Reactive","constructor","target","options","noData","packages","count","total","name","eventName","eventNames","stateChanged","eventDispatch","notifyStateChanged","mutations","SearchMutations","state","general","loading","selected","sort","order","query","all","data","page","recentlyused","favourites","mine","load","searchBar","SearchBar","element","this","getElementsByClassName","reactive","packageContainer","Container"],"mappings":"4oBA4BIA,QAAU,yBAEeC,mBAQzBC,YAAYC,OAAQC,eACVC,OAAS,CACXC,SAAU,GACVC,MAAO,EACPC,MAAO,SAGL,CACFC,4BAAsBT,WACtBU,UAAWC,mBAAWC,aACtBC,cAAeC,2BACfX,OAAQA,OACRY,UAAW,IAAIC,mBAAgBZ,SAC/Ba,MAAO,CACHC,QAAS,CACLC,SAAS,EACTC,SAAU,MACVC,KAAM,QACNC,MAAO,MACPC,MAAO,IAEPC,IAAK,CACDC,KAAMpB,OACNqB,KAAM,GAEVC,aAAc,CACVF,KAAMpB,OACNqB,KAAM,GAEVE,WAAY,CACRH,KAAMpB,OACNqB,KAAM,GAEVG,KAAM,CACFJ,KAAMpB,OACNqB,KAAM,WAIjBtB,QAAUA,QAMnB0B,YACSC,UAAY,IAAIC,oBAAU,CAC3BC,QAASC,KAAK/B,OAAOgC,uBAAuB,iCAAiC,GAC7E1B,KAAM,aACN2B,SAAUF,YAETG,iBAAmB,IAAIC,mBAAU,CAClCL,QAASC,KAAK/B,OAAOgC,uBAAuB,gCAAgC,GAC5E1B,KAAM,YACN2B,SAAUF"}