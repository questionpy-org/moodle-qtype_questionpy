define("qtype_questionpy/package_search/components/tab_content",["exports","core/templates","core/notification","qtype_questionpy/package_search/component","qtype_questionpy/package_search/components/pagination","qtype_questionpy/package_search/components/sort","qtype_questionpy/package_search/components/package"],(function(_exports,templates,_notification,_component,_pagination,_sort,_package){function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _getRequireWildcardCache(nodeInterop){if("function"!=typeof WeakMap)return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop){return nodeInterop?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.default=void 0,templates=function(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(null===obj||"object"!=typeof obj&&"function"!=typeof obj)return{default:obj};var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if("default"!==key&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}newObj.default=obj,cache&&cache.set(obj,newObj);return newObj}(templates),_notification=_interopRequireDefault(_notification),_component=_interopRequireDefault(_component),_pagination=_interopRequireDefault(_pagination),_sort=_interopRequireDefault(_sort),_package=_interopRequireDefault(_package);class _default extends _component.default{getWatchers(){return[{watch:"state.".concat(this.category,"Packages:updated"),handler:this.render}]}async create(descriptor){this.category=descriptor.category,this.selectors={CONTENT:".qpy-tab-content",SORT:'[data-for="sort"]',PAGINATION:'[data-for="pagination"]'};const sortElement=this.getElement(this.selectors.SORT);sortElement&&new _sort.default({element:sortElement,name:"sort_".concat(this.category),reactive:descriptor.reactive}),new _pagination.default({element:this.getElement(this.selectors.PAGINATION),name:"pagiation_".concat(this.category),reactive:descriptor.reactive,category:this.category})}_getPackageTemplatesPromise(contexts){let promises=[];for(const context of contexts){const contextObj=Object.assign({},context),promise=templates.renderForPromise("qtype_questionpy/package/package_selection",contextObj);promises.push(promise)}return Promise.all(promises)}async render(){try{const packages=Array.from(this.getState()["".concat(this.category,"Packages")].values()),packageTemplates=await this._getPackageTemplatesPromise(packages),contentElement=this.getElement(this.selectors.CONTENT);contentElement.innerHTML="";let index=0;for(const{html:html,js:js}of packageTemplates){const packageElement=templates.appendNodeContents(contentElement,html,js)[0];new _package.default({element:packageElement,category:this.category,packageid:packages[index++].id})}}catch(exception){await _notification.default.exception(exception)}}}return _exports.default=_default,_exports.default}));

//# sourceMappingURL=tab_content.min.js.map