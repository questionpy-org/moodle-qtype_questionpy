define("qtype_questionpy/package_search/components/tag_bar",["exports","qtype_questionpy/package_search/component","core/form-autocomplete","core/ajax","core/utils","core/str"],(function(_exports,_component,_formAutocomplete,_ajax,_utils,_str){function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.transport=_exports.processResults=_exports.TagBar=void 0,_component=_interopRequireDefault(_component),_formAutocomplete=_interopRequireDefault(_formAutocomplete),_ajax=_interopRequireDefault(_ajax);const TagBar=class extends _component.default{async create(){this.selectors={TAG_BAR:'[data-for="tag-bar"] > select'},_formAutocomplete.default.enhance(this.selectors.TAG_BAR,!1,"qtype_questionpy/package_search/components/tag_bar",await(0,_str.getString)("tag_bar","qtype_questionpy"),!1,!0,await(0,_str.getString)("tag_bar_no_selection","qtype_questionpy"),!0,{layout:"qtype_questionpy/package_search/tag_bar/layout",input:"qtype_questionpy/package_search/tag_bar/input",selection:"qtype_questionpy/package_search/tag_bar/selection"})}stateReady(){this.addEventListener(this.getElement(this.selectors.TAG_BAR),"change",(0,_utils.debounce)((event=>this.filterPackages(event.target.selectedOptions)),300))}filterPackages(selectedOptions){const tags=[];for(let i=0;i<selectedOptions.length;i++)tags.push(selectedOptions[i].value);this.reactive.dispatch("filterPackagesByTags",tags)}};_exports.TagBar=TagBar;_exports.transport=(selector,query,callback,failure)=>_ajax.default.call([{methodname:"qtype_questionpy_get_tags",args:{query:query}}])[0].then(callback).catch(failure);_exports.processResults=(selector,results)=>{const tags=[];for(const result of results)tags.push({value:result.id,label:result.tag});return tags}}));

//# sourceMappingURL=tag_bar.min.js.map