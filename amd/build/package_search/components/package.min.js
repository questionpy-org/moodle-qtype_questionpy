define("qtype_questionpy/package_search/components/package",["exports","qtype_questionpy/package_search/component"],(function(_exports,_component){var obj;Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.default=void 0,_component=(obj=_component)&&obj.__esModule?obj:{default:obj};class _default extends _component.default{getWatchers(){return[{watch:"".concat(this.category,"Packages[").concat(this.packageid,"].isfavourite:updated"),handler:this.favouriteChanged}]}create(descriptor){this.packageid=descriptor.packageid,this.category=descriptor.category,this.selectors={FAVOURITE_BUTTON:'[data-for="favourite-button"]',DOWNLOAD_BUTTON:'[data-for="download-button"]',VERSION_SELECTION:".qpy-version-selection"}}isFavourite(){return this.getState()["".concat(this.category,"Packages")].get(this.packageid).isfavourite}stateReady(){this.addEventListener(this.getElement(this.selectors.FAVOURITE_BUTTON),"click",(()=>{this.reactive.dispatch("favourite",this.packageid,!this.isFavourite())})),this.addEventListener(this.getElement(this.selectors.VERSION_SELECTION),"change",(()=>{this.setUpDownloadButton()})),this.setUpDownloadButton()}setUpDownloadButton(){const selection=this.getElement(this.selectors.VERSION_SELECTION),option=selection.options[selection.selectedIndex],button=this.getElement(this.selectors.DOWNLOAD_BUTTON);button.classList.toggle("d-none",!option.hasAttribute("data-is-mine")),button.href=option.dataset.fileurl}async favouriteChanged(){const isFavourite=this.isFavourite();this.getElement(this.selectors.FAVOURITE_BUTTON).toggleAttribute("data-is-favourite",isFavourite)}}return _exports.default=_default,_exports.default}));

//# sourceMappingURL=package.min.js.map