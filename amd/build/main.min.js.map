{"version":3,"file":"main.min.js","sources":["../src/main.js"],"sourcesContent":["import ModalFactory from 'core/modal_factory';\nimport ModalEvents from 'core/modal_events';\nimport Templates from 'core/templates';\nimport { get_strings as getStrings } from 'core/str';\n\n\n/**\n * Retrieves and returns QuestionPy packages from the application server.\n *\n * @returns {[{name: string, icon: string, description: string, id: string, version: string}]} List of packages\n */\nconst get_packages = () => {\n    // TODO:- retrieve packages from application server.\n    //      - Add optional search parameter(s).\n\n    // create fake data for now\n    let packages = [];\n    for (let i = 1; i <= 4; i++) {\n        packages.push(\n            {\n                'id': `${i}`,\n                'name': `ExampleType ${i}`,\n                'description': `This describes the package ExampleType ${i}. `.repeat(i),\n                'author': `Author ${i}`,\n                'license': `MIT`,\n                'icon': 'https://placeimg.com/480/480/tech/grayscale',\n                'version': `0.0.${i}`\n            },\n        );\n    }\n    return packages;\n};\n\n\n/**\n * Initializes the package selection modal.\n */\nexport const init = () => {\n    // fetch initial packages\n    const init_packages = get_packages();\n\n    // internationalisation\n    getStrings([\n        {\n            key: 'modal_title',\n            component: 'qtype_questionpy'\n        },\n        {\n            key: 'modal_load_package',\n            component: 'qtype_questionpy'\n        },\n        ])\n        .then(([modal_title, modal_load_package]) => {\n            const open_question_type_modal_btn = document.getElementById('open_question_type_modal');\n            open_question_type_modal_btn.onclick = () => {\n                ModalFactory.create({\n                    type: ModalFactory.types.SAVE_CANCEL,\n                    title: modal_title,\n                    body: Templates.render('qtype_questionpy/select_package_modal', {\n                        'questionpy_packages': init_packages,\n                    }),\n                }).then(function (modal) {\n                    modal.setSaveButtonText(modal_load_package);\n                    modal.getRoot().on(ModalEvents.save, () => {\n                        // TODO: check if a package was selected.\n                        // const package_id = modal.getRoot().find('form').serialize();\n                    });\n                    modal.show();\n                });\n            };\n        });\n};\n"],"names":["init_packages","packages","i","push","repeat","get_packages","key","component","then","_ref","modal_title","modal_load_package","document","getElementById","onclick","create","type","ModalFactory","types","SAVE_CANCEL","title","body","Templates","render","modal","setSaveButtonText","getRoot","on","ModalEvents","save","show"],"mappings":"sfAqCoB,WAEVA,cA5BW,UAKbC,SAAW,OACV,IAAIC,EAAI,EAAGA,GAAK,EAAGA,IACpBD,SAASE,KACL,cACaD,8BACcA,eACR,iDAA0CA,QAAME,OAAOF,2BAClDA,sBAEZ,oEACUA,YAIvBD,UASeI,wBAGX,CACP,CACIC,IAAK,cACLC,UAAW,oBAEf,CACID,IAAK,qBACLC,UAAW,sBAGdC,MAAKC,WAAEC,YAAaC,yBACoBC,SAASC,eAAe,4BAChCC,QAAU,4BACtBC,OAAO,CAChBC,KAAMC,uBAAaC,MAAMC,YACzBC,MAAOV,YACPW,KAAMC,mBAAUC,OAAO,wCAAyC,qBACrCvB,kBAE5BQ,MAAK,SAAUgB,OACdA,MAAMC,kBAAkBd,oBACxBa,MAAME,UAAUC,GAAGC,sBAAYC,MAAM,SAIrCL,MAAMM"}