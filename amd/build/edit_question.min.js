define("qtype_questionpy/edit_question",["exports","core_form/changechecker","core/notification","qtype_questionpy/utils"],(function(_exports,_changechecker,_notification,_utils){var obj;Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.initActionButton=function(card,selected){const packageSelected=document.querySelector('input[name="qpy_package_selected"]');if(selected){const packageFile=document.querySelector('input[name="qpy_package_file"]'),changeButton=card.getElementsByClassName("qpy-version-selection-button")[0];changeButton.addEventListener("click",(e=>{e.preventDefault(),packageSelected.value=!1,packageSelected.removeAttribute("disabled"),packageFile&&(packageFile.disabled=!0),(0,_changechecker.resetFormDirtyState)(changeButton),e.target.form.submit()}))}else{const packageHash=document.querySelector('input[name="qpy_package_hash"]'),selectedHash=card.getElementsByClassName("qpy-version-selection")[0],selectButton=card.getElementsByClassName("qpy-version-selection-button")[0];selectButton.addEventListener("click",(e=>{e.preventDefault(),packageSelected.value=!0,packageSelected.removeAttribute("disabled"),packageHash.value=selectedHash.value,(0,_changechecker.resetFormDirtyState)(selectButton),e.target.form.submit()}))}},_exports.initFavouriteButton=function(card,packageId){const button=card.querySelector('[data-for="favourite-button"]');if(!button)return;button.addEventListener("click",(async()=>{try{const isFavourite=button.hasAttribute("data-is-favourite");await(0,_utils.favouritePackage)(packageId,!isFavourite)&&button.toggleAttribute("data-is-favourite",!isFavourite)}catch(exception){await _notification.default.exception(exception)}}))},_exports.initUploadForm=function(){const packageFile=document.querySelector('input[name="qpy_package_file"]'),packageSelected=document.querySelector('input[name="qpy_package_selected"]');packageFile.addEventListener("change",(e=>{packageSelected.value=!0,packageSelected.removeAttribute("disabled"),(0,_changechecker.resetFormDirtyState)(packageFile),e.target.form.submit()}))},_notification=(obj=_notification)&&obj.__esModule?obj:{default:obj}}));

//# sourceMappingURL=edit_question.min.js.map