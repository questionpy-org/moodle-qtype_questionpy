<!--
  ~ This file is part of the QuestionPy Moodle plugin - https://questionpy.org
  ~
  ~ Moodle is free software: you can redistribute it and/or modify
  ~ it under the terms of the GNU General Public License as published by
  ~ the Free Software Foundation, either version 3 of the License, or
  ~ (at your option) any later version.
  ~
  ~ Moodle is distributed in the hope that it will be useful,
  ~ but WITHOUT ANY WARRANTY; without even the implied warranty of
  ~ MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
  ~ GNU General Public License for more details.
  ~
  ~ You should have received a copy of the GNU General Public License
  ~ along with Moodle.  If not, see <http://www.gnu.org/licenses />.
-->
{{!
    @template qtype_questionpy/settings/server_info

    Displays information about the server and the server status.

    Context variables required for this template:
    * status - server information and status
    * description - localised field description

    Example context (json):
    {
        "status":{
            "name":"questionpy-server",
            "version":"0.1.0",
            "allow_lms_packages":true,
            "max_package_size":20971520,
            "usage":{
                "requests_in_process":0,
                "requests_in_queue":0
            }
        },
        "description":{
            "title_general":"General",
            "name":"Name",
            "version":"Version",
            "allow_lms_packages":"Allows packages from the LMS",
            "max_package_size":"Maximum package size",
            "usage_title":"Usage",
            "requests_in_process":"Requests in process",
            "requests_in_queue":"Requests in queue"
        }
    }
}}
<div>
    <h3 class="qpy-server-info-section-title">{{ description.title_general }}</h3>
    <table class="qpy-server-info-table">
        <tr>
            <th class="qpy-server-info-th">{{ description.name }}</th>
            <td class="qpy-server-info-td">{{ status.name }}</td>
        </tr>
        <tr>
            <th class="qpy-server-info-th">{{ description.version }}</th>
            <td class="qpy-server-info-td">{{ status.version }}</td>
        </tr>
        <tr>
            <th class="qpy-server-info-th">{{ description.allow_lms_packages }}</th>
            <td class="qpy-server-info-td">
                {{#status.allowlmspackages}}Yes{{/status.allowlmspackages}}
                {{^status.allowlmspackages}}No{{/status.allowlmspackages}}
            </td>
        </tr>
        <tr>
            <th class="qpy-server-info-th">{{ description.max_package_size }}</th>
            <td class="qpy-server-info-td">{{ status.maxpackagesize }} MiB</td>
        </tr>
    </table>
    {{#status.usage}}
    <h3 class="qpy-server-info-section-title">{{ description.usage_title }}</h3>
    <table class="qpy-server-info-table">
        <tr>
            <th class="qpy-server-info-th">{{ description.requests_in_process }}</th>
            <td class="qpy-server-info-td">{{ status.usage.requestsinprocess }}</td>
        </tr>
        <tr>
            <th class="qpy-server-info-th">{{ description.requests_in_queue }}</th>
            <td class="qpy-server-info-td">{{ status.usage.requestsinqueue }}</td>
        </tr>
    </table>
    {{/status.usage}}
</div>
